<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin — Legado Muebles</title>
    <meta name="robots" content="noindex, nofollow">
    <link rel="stylesheet" href="admin.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&display=swap">
</head>

<body>

    <!-- ======= LOGIN SCREEN ======= -->
    <div id="login-screen" class="login-screen">
        <div class="login-card">
            <div class="login-header">
                <span class="material-symbols-outlined login-icon">admin_panel_settings</span>
                <h1>Panel de Administración</h1>
                <p>Legado Muebles — San Rafael</p>
            </div>
            <form id="login-form" class="login-form">
                <div class="form-group">
                    <label for="login-email">Email</label>
                    <input type="email" id="login-email" required placeholder="tu@email.com" autocomplete="email">
                </div>
                <div class="form-group">
                    <label for="login-password">Contraseña</label>
                    <input type="password" id="login-password" required placeholder="••••••••"
                        autocomplete="current-password">
                </div>
                <p id="login-error" class="login-error" hidden></p>
                <button type="submit" class="btn btn-primary btn-full" id="login-btn">
                    <span class="material-symbols-outlined">login</span>
                    Iniciar Sesión
                </button>
            </form>
        </div>
    </div>

    <!-- ======= ADMIN DASHBOARD ======= -->
    <div id="admin-dashboard" class="dashboard" hidden>
        <!-- Top Bar -->
        <header class="topbar">
            <div class="topbar-left">
                <span class="material-symbols-outlined">storefront</span>
                <strong>Legado Muebles Admin</strong>
            </div>
            <div class="topbar-right">
                <span id="user-email" class="user-email"></span>
                <button id="logout-btn" class="btn btn-ghost">
                    <span class="material-symbols-outlined">logout</span>
                    Salir
                </button>
            </div>
        </header>

        <!-- Stats -->
        <div class="stats-bar">
            <div class="stat-card">
                <span class="material-symbols-outlined">inventory_2</span>
                <div>
                    <span id="stat-products" class="stat-number">0</span>
                    <span class="stat-label">Productos</span>
                </div>
            </div>
            <div class="stat-card">
                <span class="material-symbols-outlined">category</span>
                <div>
                    <span id="stat-categories" class="stat-number">0</span>
                    <span class="stat-label">Categorías</span>
                </div>
            </div>
            <div class="stat-card">
                <span class="material-symbols-outlined">star</span>
                <div>
                    <span id="stat-featured" class="stat-number">0</span>
                    <span class="stat-label">Destacados</span>
                </div>
            </div>
        </div>

        <!-- Toolbar -->
        <div class="toolbar">
            <h2>Productos</h2>
            <div class="toolbar-actions">
                <button id="add-product-btn" class="btn btn-primary">
                    <span class="material-symbols-outlined">add</span>
                    Nuevo Producto
                </button>
            </div>
        </div>

        <!-- Products Table -->
        <div class="table-wrapper">
            <table class="products-table">
                <thead>
                    <tr>
                        <th>Imagen</th>
                        <th>Nombre</th>
                        <th>Categoría</th>
                        <th>Precio</th>
                        <th>Dimensiones</th>
                        <th>Estado</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody id="products-tbody">
                    <tr>
                        <td colspan="7" class="loading-cell">
                            <span class="material-symbols-outlined spin">progress_activity</span>
                            Cargando productos...
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- ======= PRODUCT MODAL ======= -->
    <div id="product-modal" class="modal" hidden>
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title">Nuevo Producto</h3>
                <button class="modal-close" id="modal-close">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>
            <form id="product-form" class="modal-body">
                <input type="hidden" id="product-id">

                <div class="form-row">
                    <div class="form-group">
                        <label for="product-name">Nombre *</label>
                        <input type="text" id="product-name" required placeholder="Ej: Mesita Nórdica">
                    </div>
                    <div class="form-group">
                        <label for="product-cat">Categoría *</label>
                        <select id="product-cat" required>
                            <option value="">Seleccionar...</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="product-price">Precio (ARS) *</label>
                        <input type="number" id="product-price" required min="0" step="1" placeholder="95000">
                    </div>
                    <div class="form-group">
                        <label for="product-dimensions">Dimensiones</label>
                        <input type="text" id="product-dimensions" placeholder="Ej: 120x50 cm">
                    </div>
                </div>

                <div class="form-group">
                    <label>Imagen del producto *</label>
                    <input type="hidden" id="product-image" required>
                    <div id="upload-area" class="upload-area">
                        <div id="upload-placeholder" class="upload-placeholder">
                            <span class="material-symbols-outlined">cloud_upload</span>
                            <p><strong>Hacé clic o arrastrá una imagen</strong></p>
                            <p class="upload-hint">JPG, PNG o WebP — máx 5MB</p>
                        </div>
                        <div id="upload-progress" class="upload-progress" hidden>
                            <span class="material-symbols-outlined spin">progress_activity</span>
                            <p>Subiendo imagen...</p>
                        </div>
                        <div id="image-preview" class="image-preview" hidden>
                            <img id="preview-img" src="" alt="Preview">
                            <button type="button" id="remove-image" class="btn btn-sm btn-danger remove-img-btn">
                                <span class="material-symbols-outlined">delete</span>
                                Quitar
                            </button>
                        </div>
                    </div>
                    <input type="file" id="file-input" accept="image/*" hidden>
                </div>

                <div class="form-row checkbox-row">
                    <label class="checkbox-label">
                        <input type="checkbox" id="product-featured">
                        <span>Destacado</span>
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="product-new">
                        <span>Nuevo</span>
                    </label>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-ghost" id="modal-cancel">Cancelar</button>
                    <button type="submit" class="btn btn-primary" id="modal-save">
                        <span class="material-symbols-outlined">save</span>
                        Guardar
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- ======= TOAST ======= -->
    <div id="toast" class="toast" hidden>
        <span class="material-symbols-outlined" id="toast-icon">check_circle</span>
        <span id="toast-message"></span>
    </div>

    <!-- Firebase SDKs (CDN compat mode for vanilla JS) -->
    <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-firestore-compat.js"></script>
    <script src="admin.js"></script>
</body>

</html>